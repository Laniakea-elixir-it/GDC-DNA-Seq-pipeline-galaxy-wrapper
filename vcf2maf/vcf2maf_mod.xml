<tool id="vcf2maf" name="vcf2maf" version="1.0.0">
    <description>Converts VCF files into MAF format</description>
    <command>
        ln -s $input_vcf ./input.vcf;
        perl /export/results/vcf2maf/vcf2maf.pl    
            --input-vcf ./input.vcf
            --output-maf $output_maf
	    --vep-forks 1
            --tumor-id $tumour_id
            --normal-id $normal_id
            --buffer-size $buffer
            --vep-path \$CONDA_DEFAULT_ENV/bin/
            --vep-data \$CONDA_DEFAULT_ENV/vep_cache
            --ref-fasta $reference
            --species $species;
    </command>
    <inputs>
        <param name="tumour_id" type="text" value="TUMOR" label="Tumour ID (Name)"/>
        <param name="normal_id" type="text" value="NORMAL" label="Normal ID (Name)"/>
        <expand macro="list_vcf2maf"/>
        <param name="input_vcf" type="data" format="vcf" label="Input VCF File" />
        <param name="reference" type="data" format="fasta" label="Input fasta file" />
        <param name="buffer" type="text" value="5000" label="buffer size decrease if vcf2maf can not allocate memory" />
    </inputs>

    <outputs>
        <data name="output_maf" format="maf" label="${tool.name} on ${on_string} " />
    </outputs>

    <stdio>
        <exit_code range="1:" level="fatal" description="Failure" />
    </stdio>

    <requirements>
	<requirement type="package" version="86">variant-effect-predictor</requirement>
    </requirements>

    <macros>
      <import>list_vcf2maf.xml</import>
    </macros>

    <help>

    </help>
</tool>
